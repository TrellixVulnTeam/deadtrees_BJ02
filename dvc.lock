schema: '2.0'
stages:
  createtiles:
    cmd: mkdir data/processed; gdal_retile.py  -csv locations.csv  -v -ps 8192 8192
      -co "TILED=YES" -co "COMPRESS=LZW"  -targetDir data/processed  data/raw/tif_ortho_2019.tif
    deps:
    - path: data/raw/tif_ortho_2019.tif
      md5: f29b9345665f25e7465eafa3bd6f2f49
      size: 353002145755
    params:
      params.yaml:
        source_dim: 8192
    outs:
    - path: data/processed
      md5: 00a42f0155c9fb5bc3f5bb1a93156647.dir
      size: 169237483862
      nfiles: 1837
  createmasks:
    cmd: python createmasks.py data/processed data/processed.masks data/raw/dead_treed_proj.shp
    deps:
    - path: data/processed
      md5: 00a42f0155c9fb5bc3f5bb1a93156647.dir
      size: 169237483862
      nfiles: 1837
    - path: data/raw/dead_treed_proj.dbf
      md5: bdd8cf66420982fa5732ce0123ba52dc
      size: 162512
    - path: data/raw/dead_treed_proj.prj
      md5: 800897f6385d09a99ee62978930f07fe
      size: 436
    - path: data/raw/dead_treed_proj.shp
      md5: 2389ce8034d1c6f3955ecf7bd4b5f109
      size: 2160036
    - path: data/raw/dead_treed_proj.shx
      md5: f2e5b8e7338cf8848fa4518c9b65a595
      size: 61972
    outs:
    - path: data/processed.masks
      md5: b671c41c7ac6670bae314d3fa076115d.dir
      size: 5973460259
      nfiles: 89
  createdataset:
    cmd: python createdataset.py data/processed data/processed.masks data/dataset  --source_dim
      8192 --tile_size 512
    deps:
    - path: data/processed
      md5: 00a42f0155c9fb5bc3f5bb1a93156647.dir
      size: 169237483862
      nfiles: 1837
    - path: data/processed.masks
      md5: b671c41c7ac6670bae314d3fa076115d.dir
      size: 5973460259
      nfiles: 89
    params:
      params.yaml:
        createdataset.tile_size: 512
        source_dim: 8192
    outs:
    - path: data/dataset
      md5: ff68462a563cebeb122ed3d5d617b618.dir
      size: 22699478530
      nfiles: 23
